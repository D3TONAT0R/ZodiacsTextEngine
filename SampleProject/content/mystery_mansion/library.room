@ENTER
+TEXT
The library is filled with ancient books. A candle flickers on a desk. You notice a suspicious-looking <h>BOOKSHELF<r> and a dusty <h>DIARY<r> on the table. You can return to the <h>ENTRANCE HALL<r>.
+TEXT
What will you do?

>READ DIARY
+TEXT The diary mentions a secret passage behind the bookshelf and a key hidden in the dining room.
+GOTO library

>SEARCH BOOKSHELF
IF has_key == 1
    +TEXT You unlock a hidden latch and reveal a secret passage!
    +WAIT
    +SPACE
    +TEXT
    The bookshelf slides aside, revealing a <h>SECRET PASSAGE<r>. You can also return to the <h>ENTRANCE HALL<r>.
    +TEXT
    What will you do?
ELSE
    +TEXT The bookshelf won't budge. Maybe you need a key.
ENDIF

>ENTRANCE HALL
+GOTO entrance_hall


>SECRET PASSAGE
+GOTO secret_passage

>ENTRANCE HALL
+GOTO entrance_hall
